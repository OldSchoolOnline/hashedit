(function(){var e,t,i,n,r,o,s,a,l=[].slice,d={}.hasOwnProperty,h=function(e,t){function i(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};s=function(){},t=function(){function e(){}return e.prototype.addEventListener=e.prototype.on,e.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this},e.prototype.emit=function(){var e,t,i,n,r,o;if(n=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],this._callbacks=this._callbacks||{},i=this._callbacks[n])for(r=0,o=i.length;o>r;r++)t=i[r],t.apply(this,e);return this},e.prototype.removeListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.off=function(e,t){var i,n,r,o,s;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(n=this._callbacks[e],!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(r=o=0,s=n.length;s>o;r=++o)if(i=n[r],i===t){n.splice(r,1);break}return this},e}(),e=function(e){function i(e,t){var r,o,s;if(this.element=e,this.version=i.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(i.instances.push(this),this.element.dropzone=this,r=null!=(s=i.optionsForElement(this.element))?s:{},this.options=n({},this.defaultOptions,r,null!=t?t:{}),this.options.forceFallback||!i.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(o=this.getExistingFallback())&&o.parentNode&&o.parentNode.removeChild(o),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?i.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:i.getElements(this.options.clickable,"clickable")),this.init()}var n,r;return h(i,e),i.prototype.Emitter=t,i.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],i.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return s},forceFallback:!1,fallback:function(){var e,t,n,r,o,s;for(this.element.className=""+this.element.className+" dz-browser-not-supported",s=this.element.getElementsByTagName("div"),r=0,o=s.length;o>r;r++)e=s[r],/(^| )dz-message($| )/.test(e.className)&&(t=e,e.className="dz-message");return t||(t=i.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),n=t.getElementsByTagName("span")[0],n&&(null!=n.textContent?n.textContent=this.options.dictFallbackMessage:null!=n.innerText&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,i,n;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},i=e.width/e.height,t.optWidth=this.options.thumbnailWidth,t.optHeight=this.options.thumbnailHeight,null==t.optWidth&&null==t.optHeight?(t.optWidth=t.srcWidth,t.optHeight=t.srcHeight):null==t.optWidth?t.optWidth=i*t.optHeight:null==t.optHeight&&(t.optHeight=1/i*t.optWidth),n=t.optWidth/t.optHeight,e.height<t.optHeight||e.width<t.optWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):i>n?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*n):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/n),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:s,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,n,r,o,s,a,l,d,h,u,c,p,m;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(e.previewElement=i.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),u=e.previewElement.querySelectorAll("[data-dz-name]"),o=0,l=u.length;l>o;o++)t=u[o],t.textContent=e.name;for(c=e.previewElement.querySelectorAll("[data-dz-size]"),s=0,d=c.length;d>s;s++)t=c[s],t.innerHTML=this.filesize(e.size);for(this.options.addRemoveLinks&&(e._removeLink=i.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),n=function(t){return function(n){return n.preventDefault(),n.stopPropagation(),e.status===i.UPLOADING?i.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?i.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)}}(this),p=e.previewElement.querySelectorAll("[data-dz-remove]"),m=[],a=0,h=p.length;h>a;a++)r=p[a],m.push(r.addEventListener("click",n));return m}},removedfile:function(e){var t;return e.previewElement&&null!=(t=e.previewElement)&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var i,n,r,o;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),n=0,r=o.length;r>n;n++)i=o[n],i.alt=e.name,i.src=t;return setTimeout(function(){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(e,t){var i,n,r,o,s;if(e.previewElement){for(e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error),o=e.previewElement.querySelectorAll("[data-dz-errormessage]"),s=[],n=0,r=o.length;r>n;n++)i=o[n],s.push(i.textContent=t);return s}},errormultiple:s,processing:function(e){return e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink)?e._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:s,uploadprogress:function(e,t){var i,n,r,o,s;if(e.previewElement){for(o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],n=0,r=o.length;r>n;n++)i=o[n],s.push("PROGRESS"===i.nodeName?i.value=t:i.style.width=""+t+"%");return s}},totaluploadprogress:s,sending:s,sendingmultiple:s,success:function(e){return e.previewElement?e.previewElement.classList.add("dz-success"):void 0},successmultiple:s,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:s,complete:function(e){return e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement?e.previewElement.classList.add("dz-complete"):void 0},completemultiple:s,maxfilesexceeded:s,maxfilesreached:s,queuecomplete:s,addedfiles:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},n=function(){var e,t,i,n,r,o,s;for(n=arguments[0],i=2<=arguments.length?l.call(arguments,1):[],o=0,s=i.length;s>o;o++){t=i[o];for(e in t)r=t[e],n[e]=r}return n},i.prototype.getAcceptedFiles=function(){var e,t,i,n,r;for(n=this.files,r=[],t=0,i=n.length;i>t;t++)e=n[t],e.accepted&&r.push(e);return r},i.prototype.getRejectedFiles=function(){var e,t,i,n,r;for(n=this.files,r=[],t=0,i=n.length;i>t;t++)e=n[t],e.accepted||r.push(e);return r},i.prototype.getFilesWithStatus=function(e){var t,i,n,r,o;for(r=this.files,o=[],i=0,n=r.length;n>i;i++)t=r[i],t.status===e&&o.push(t);return o},i.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(i.QUEUED)},i.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(i.UPLOADING)},i.prototype.getAddedFiles=function(){return this.getFilesWithStatus(i.ADDED)},i.prototype.getActiveFiles=function(){var e,t,n,r,o;for(r=this.files,o=[],t=0,n=r.length;n>t;t++)e=r[t],(e.status===i.UPLOADING||e.status===i.QUEUED)&&o.push(e);return o},i.prototype.init=function(){var e,t,n,r,o,s,a;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(i.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(n=function(e){return function(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null==e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!=e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!=e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",document.querySelector(e.options.hiddenInputContainer).appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var t,i,r,o;if(i=e.hiddenFileInput.files,i.length)for(r=0,o=i.length;o>r;r++)t=i[r],e.addFile(t);return e.emit("addedfiles",i),n()})}}(this))(),this.URL=null!=(s=window.URL)?s:window.webkitURL,a=this.events,r=0,o=a.length;o>r;r++)e=a[r],this.on(e,this.options[e]);return this.on("uploadprogress",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(e){return function(){return e.updateTotalUploadProgress()}}(this)),this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this)),this.on("complete",function(e){return function(){return 0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length?setTimeout(function(){return e.emit("queuecomplete")},0):void 0}}(this)),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(i){return t(i),e.emit("dragenter",i)}}(this),dragover:function(e){return function(i){var n;try{n=i.dataTransfer.effectAllowed}catch(r){}return i.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",t(i),e.emit("dragover",i)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(i){return t(i),e.drop(i)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}],this.clickableElements.forEach(function(e){return function(t){return e.listeners.push({element:t,events:{click:function(n){return(t!==e.element||n.target===e.element||i.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},i.prototype.destroy=function(){var e;return this.disable(),this.removeAllFiles(!0),(null!=(e=this.hiddenFileInput)?e.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,i.instances.splice(i.instances.indexOf(this),1)},i.prototype.updateTotalUploadProgress=function(){var e,t,i,n,r,o,s,a;if(n=0,i=0,e=this.getActiveFiles(),e.length){for(a=this.getActiveFiles(),o=0,s=a.length;s>o;o++)t=a[o],n+=t.upload.bytesSent,i+=t.upload.total;r=100*n/i}else r=100;return this.emit("totaluploadprogress",r,i,n)},i.prototype._getParamName=function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):""+this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")},i.prototype.getFallbackForm=function(){var e,t,n,r;return(e=this.getExistingFallback())?e:(n='<div class="dz-fallback">',this.options.dictFallbackText&&(n+="<p>"+this.options.dictFallbackText+"</p>"),n+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=i.createElement(n),"FORM"!==this.element.tagName?(r=i.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),r.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=r?r:t)},i.prototype.getExistingFallback=function(){var e,t,i,n,r,o;for(t=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)if(t=e[i],/(^| )fallback($| )/.test(t.className))return t},o=["div","form"],n=0,r=o.length;r>n;n++)if(i=o[n],e=t(this.element.getElementsByTagName(i)))return e},i.prototype.setupEventListeners=function(){var e,t,i,n,r,o,s;for(o=this.listeners,s=[],n=0,r=o.length;r>n;n++)e=o[n],s.push(function(){var n,r;n=e.events,r=[];for(t in n)i=n[t],r.push(e.element.addEventListener(t,i,!1));return r}());return s},i.prototype.removeEventListeners=function(){var e,t,i,n,r,o,s;for(o=this.listeners,s=[],n=0,r=o.length;r>n;n++)e=o[n],s.push(function(){var n,r;n=e.events,r=[];for(t in n)i=n[t],r.push(e.element.removeEventListener(t,i,!1));return r}());return s},i.prototype.disable=function(){var e,t,i,n,r;for(this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),n=this.files,r=[],t=0,i=n.length;i>t;t++)e=n[t],r.push(this.cancelUpload(e));return r},i.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},i.prototype.filesize=function(e){var t,i,n,r,o,s,a,l;if(n=0,r="b",e>0){for(s=["TB","GB","MB","KB","b"],i=a=0,l=s.length;l>a;i=++a)if(o=s[i],t=Math.pow(this.options.filesizeBase,4-i)/10,e>=t){n=e/Math.pow(this.options.filesizeBase,4-i),r=o;break}n=Math.round(10*n)/10}return"<strong>"+n+"</strong> "+r},i.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},i.prototype.drop=function(e){var t,i;e.dataTransfer&&(this.emit("drop",e),t=e.dataTransfer.files,this.emit("addedfiles",t),t.length&&(i=e.dataTransfer.items,i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)))},i.prototype.paste=function(e){var t,i;return null!=(null!=e&&null!=(i=e.clipboardData)?i.items:void 0)?(this.emit("paste",e),t=e.clipboardData.items,t.length?this._addFilesFromItems(t):void 0):void 0},i.prototype.handleFiles=function(e){var t,i,n,r;for(r=[],i=0,n=e.length;n>i;i++)t=e[i],r.push(this.addFile(t));return r},i.prototype._addFilesFromItems=function(e){var t,i,n,r,o;for(o=[],n=0,r=e.length;r>n;n++)i=e[n],o.push(null!=i.webkitGetAsEntry&&(t=i.webkitGetAsEntry())?t.isFile?this.addFile(i.getAsFile()):t.isDirectory?this._addFilesFromDirectory(t,t.name):void 0:null!=i.getAsFile&&(null==i.kind||"file"===i.kind)?this.addFile(i.getAsFile()):void 0);return o},i.prototype._addFilesFromDirectory=function(e,t){var i,n;return i=e.createReader(),n=function(e){return function(i){var n,r,o;for(r=0,o=i.length;o>r;r++)n=i[r],n.isFile?n.file(function(i){return e.options.ignoreHiddenFiles&&"."===i.name.substring(0,1)?void 0:(i.fullPath=""+t+"/"+i.name,e.addFile(i))}):n.isDirectory&&e._addFilesFromDirectory(n,""+t+"/"+n.name)}}(this),i.readEntries(n,function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(e):void 0})},i.prototype.accept=function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):i.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},i.prototype.addFile=function(e){return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=i.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(t){return function(i){return i?(e.accepted=!1,t._errorProcessing([e],i)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()}}(this))},i.prototype.enqueueFiles=function(e){var t,i,n;for(i=0,n=e.length;n>i;i++)t=e[i],this.enqueueFile(t);return null},i.prototype.enqueueFile=function(e){if(e.status!==i.ADDED||e.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return e.status=i.QUEUED,this.options.autoProcessQueue?setTimeout(function(e){return function(){return e.processQueue()}}(this),0):void 0},i.prototype._thumbnailQueue=[],i.prototype._processingThumbnail=!1,i.prototype._enqueueThumbnail=function(e){return this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(e),setTimeout(function(e){return function(){return e._processThumbnailQueue()}}(this),0)):void 0},i.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(e){return function(){return e._processingThumbnail=!1,e._processThumbnailQueue()}}(this)))},i.prototype.removeFile=function(e){return e.status===i.UPLOADING&&this.cancelUpload(e),this.files=a(this.files,e),this.emit("removedfile",e),0===this.files.length?this.emit("reset"):void 0},i.prototype.removeAllFiles=function(e){var t,n,r,o;for(null==e&&(e=!1),o=this.files.slice(),n=0,r=o.length;r>n;n++)t=o[n],(t.status!==i.UPLOADING||e)&&this.removeFile(t);return null},i.prototype.createThumbnail=function(e,t){var i;return i=new FileReader,i.onload=function(n){return function(){return"image/svg+xml"===e.type?(n.emit("thumbnail",e,i.result),void(null!=t&&t())):n.createThumbnailFromUrl(e,i.result,t)}}(this),i.readAsDataURL(e)},i.prototype.createThumbnailFromUrl=function(e,t,i,n){var r;return r=document.createElement("img"),n&&(r.crossOrigin=n),r.onload=function(t){return function(){var n,s,a,l,d,h,u,c;return e.width=r.width,e.height=r.height,a=t.options.resize.call(t,e),null==a.trgWidth&&(a.trgWidth=a.optWidth),null==a.trgHeight&&(a.trgHeight=a.optHeight),n=document.createElement("canvas"),s=n.getContext("2d"),n.width=a.trgWidth,n.height=a.trgHeight,o(s,r,null!=(d=a.srcX)?d:0,null!=(h=a.srcY)?h:0,a.srcWidth,a.srcHeight,null!=(u=a.trgX)?u:0,null!=(c=a.trgY)?c:0,a.trgWidth,a.trgHeight),l=n.toDataURL("image/png"),t.emit("thumbnail",e,l),null!=i?i():void 0}}(this),null!=i&&(r.onerror=i),r.src=t},i.prototype.processQueue=function(){var e,t,i,n;if(t=this.options.parallelUploads,i=this.getUploadingFiles().length,e=i,!(i>=t)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-i));for(;t>e;){if(!n.length)return;this.processFile(n.shift()),e++}}},i.prototype.processFile=function(e){return this.processFiles([e])},i.prototype.processFiles=function(e){var t,n,r;for(n=0,r=e.length;r>n;n++)t=e[n],t.processing=!0,t.status=i.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},i.prototype._getFilesWithXhr=function(e){var t,i;return i=function(){var i,n,r,o;for(r=this.files,o=[],i=0,n=r.length;n>i;i++)t=r[i],t.xhr===e&&o.push(t);return o}.call(this)},i.prototype.cancelUpload=function(e){var t,n,r,o,s,a,l;if(e.status===i.UPLOADING){for(n=this._getFilesWithXhr(e.xhr),r=0,s=n.length;s>r;r++)t=n[r],t.status=i.CANCELED;for(e.xhr.abort(),o=0,a=n.length;a>o;o++)t=n[o],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else((l=e.status)===i.ADDED||l===i.QUEUED)&&(e.status=i.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));return this.options.autoProcessQueue?this.processQueue():void 0},r=function(){var e,t;return t=arguments[0],e=2<=arguments.length?l.call(arguments,1):[],"function"==typeof t?t.apply(this,e):t},i.prototype.uploadFile=function(e){return this.uploadFiles([e])},i.prototype.uploadFiles=function(e){var t,o,s,a,l,d,h,u,c,p,m,g,f,v,b,y,w,E,A,S,C,x,L,F,T,M,k,D,z,H,_,N,q,I;for(A=new XMLHttpRequest,S=0,F=e.length;F>S;S++)t=e[S],t.xhr=A;g=r(this.options.method,e),w=r(this.options.url,e),A.open(g,w,!0),A.withCredentials=!!this.options.withCredentials,b=null,s=function(i){return function(){var n,r,o;for(o=[],n=0,r=e.length;r>n;n++)t=e[n],o.push(i._errorProcessing(e,b||i.options.dictResponseError.replace("{{statusCode}}",A.status),A));return o}}(this),y=function(i){return function(n){var r,o,s,a,l,d,h,u,c;if(null!=n)for(o=100*n.loaded/n.total,s=0,d=e.length;d>s;s++)t=e[s],t.upload={progress:o,total:n.total,bytesSent:n.loaded};else{for(r=!0,o=100,a=0,h=e.length;h>a;a++)t=e[a],(100!==t.upload.progress||t.upload.bytesSent!==t.upload.total)&&(r=!1),t.upload.progress=o,t.upload.bytesSent=t.upload.total;if(r)return}for(c=[],l=0,u=e.length;u>l;l++)t=e[l],c.push(i.emit("uploadprogress",t,o,t.upload.bytesSent));return c}}(this),A.onload=function(t){return function(n){var r;if(e[0].status!==i.CANCELED&&4===A.readyState){if(b=A.responseText,A.getResponseHeader("content-type")&&~A.getResponseHeader("content-type").indexOf("application/json"))try{b=JSON.parse(b)}catch(o){n=o,b="Invalid JSON response from server."}return y(),200<=(r=A.status)&&300>r?t._finished(e,b,n):s()}}}(this),A.onerror=function(){return function(){return e[0].status!==i.CANCELED?s():void 0}}(this),v=null!=(z=A.upload)?z:A,v.onprogress=y,d={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&n(d,this.options.headers);for(a in d)l=d[a],l&&A.setRequestHeader(a,l);if(o=new FormData,this.options.params){H=this.options.params;for(m in H)E=H[m],o.append(m,E)}for(C=0,T=e.length;T>C;C++)t=e[C],this.emit("sending",t,A,o);if(this.options.uploadMultiple&&this.emit("sendingmultiple",e,A,o),"FORM"===this.element.tagName)for(_=this.element.querySelectorAll("input, textarea, select, button"),x=0,M=_.length;M>x;x++)if(u=_[x],c=u.getAttribute("name"),p=u.getAttribute("type"),"SELECT"===u.tagName&&u.hasAttribute("multiple"))for(N=u.options,L=0,k=N.length;k>L;L++)f=N[L],f.selected&&o.append(c,f.value);else(!p||"checkbox"!==(q=p.toLowerCase())&&"radio"!==q||u.checked)&&o.append(c,u.value);for(h=D=0,I=e.length-1;I>=0?I>=D:D>=I;h=I>=0?++D:--D)o.append(this._getParamName(h),e[h],e[h].name);return this.submitRequest(A,o,e)},i.prototype.submitRequest=function(e,t){return e.send(t)},i.prototype._finished=function(e,t,n){var r,o,s;for(o=0,s=e.length;s>o;o++)r=e[o],r.status=i.SUCCESS,this.emit("success",r,t,n),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},i.prototype._errorProcessing=function(e,t,n){var r,o,s;for(o=0,s=e.length;s>o;o++)r=e[o],r.status=i.ERROR,this.emit("error",r,t,n),this.emit("complete",r);return this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue?this.processQueue():void 0},i}(t),e.version="4.2.0",e.options={},e.optionsForElement=function(t){return t.getAttribute("id")?e.options[i(t.getAttribute("id"))]:void 0},e.instances=[],e.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},e.autoDiscover=!0,e.discover=function(){var t,i,n,r,o,s;for(document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],t=function(e){var t,i,r,o;for(o=[],i=0,r=e.length;r>i;i++)t=e[i],o.push(/(^| )dropzone($| )/.test(t.className)?n.push(t):void 0);return o},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),s=[],r=0,o=n.length;o>r;r++)i=n[r],s.push(e.optionsForElement(i)!==!1?new e(i):void 0);return s},e.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],e.isBrowserSupported=function(){var t,i,n,r,o;if(t=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(o=e.blacklistedBrowsers,n=0,r=o.length;r>n;n++)i=o[n],i.test(navigator.userAgent)&&(t=!1);else t=!1;else t=!1;return t},a=function(e,t){var i,n,r,o;for(o=[],n=0,r=e.length;r>n;n++)i=e[n],i!==t&&o.push(i);return o},i=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})},e.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},e.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},e.getElement=function(e,t){var i;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},e.getElements=function(e,t){var i,n,r,o,s,a,l,d;if(e instanceof Array){r=[];try{for(o=0,a=e.length;a>o;o++)n=e[o],r.push(this.getElement(n,t))}catch(h){i=h,r=null}}else if("string"==typeof e)for(r=[],d=document.querySelectorAll(e),s=0,l=d.length;l>s;s++)n=d[s],r.push(n);else null!=e.nodeType&&(r=[e]);if(null==r||!r.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return r},e.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},e.isValidFile=function(e,t){var i,n,r,o,s;if(!t)return!0;for(t=t.split(","),n=e.type,i=n.replace(/\/.*$/,""),o=0,s=t.length;s>o;o++)if(r=t[o],r=r.trim(),"."===r.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(i===r.replace(/\/.*$/,""))return!0}else if(n===r)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(t){return this.each(function(){return new e(this,t)})}),"undefined"!=typeof module&&null!==module?module.exports=e:window.Dropzone=e,
e.ADDED="added",e.QUEUED="queued",e.ACCEPTED=e.QUEUED,e.UPLOADING="uploading",e.PROCESSING=e.UPLOADING,e.CANCELED="canceled",e.ERROR="error",e.SUCCESS="success",r=function(e){var t,i,n,r,o,s,a,l,d,h;for(a=e.naturalWidth,s=e.naturalHeight,i=document.createElement("canvas"),i.width=1,i.height=s,n=i.getContext("2d"),n.drawImage(e,0,0),r=n.getImageData(0,0,1,s).data,h=0,o=s,l=s;l>h;)t=r[4*(l-1)+3],0===t?o=l:h=l,l=o+h>>1;return d=l/s,0===d?1:d},o=function(e,t,i,n,o,s,a,l,d,h){var u;return u=r(t),e.drawImage(t,i,n,o,s,a,l,d,h/u)},n=function(e,t){var i,n,r,o,s,a,l,d,h;if(r=!1,h=!0,n=e.document,d=n.documentElement,i=n.addEventListener?"addEventListener":"attachEvent",l=n.addEventListener?"removeEventListener":"detachEvent",a=n.addEventListener?"":"on",o=function(i){return"readystatechange"!==i.type||"complete"===n.readyState?(("load"===i.type?e:n)[l](a+i.type,o,!1),!r&&(r=!0)?t.call(e,i.type||i):void 0):void 0},s=function(){var e;try{d.doScroll("left")}catch(t){return e=t,void setTimeout(s,50)}return o("poll")},"complete"!==n.readyState){if(n.createEventObject&&d.doScroll){try{h=!e.frameElement}catch(u){}h&&s()}return n[i](a+"DOMContentLoaded",o,!1),n[i](a+"readystatechange",o,!1),e[i](a+"load",o,!1)}},e._autoDiscoverFunction=function(){return e.autoDiscover?e.discover():void 0},n(window,e._autoDiscoverFunction)}).call(this),!function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[I]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var n in i)!(n in t)&&(t[n]=i[n]);X(t);for(var o in this)"_"===o.charAt(0)&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:O,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Q.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){E&&E.state!==e&&(a(E,"display",e?"none":""),!e&&E.state&&A.insertBefore(E,b),E.state=e)}function i(e,t,i){if(e){i=i||R,t=t.split(".");var n=t.shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===n&&e.parentNode===i||(""===n||e.nodeName.toUpperCase()==n)&&(!t.length||((" "+e.className+" ").match(r)||[]).length==t.length))return e;while(e!==i&&(e=e.parentNode))}return null}function n(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function r(e,t,i){e.addEventListener(t,i,!1)}function o(e,t,i){e.removeEventListener(t,i,!1)}function s(e,t,i){if(e)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(q," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(q," ")}}function a(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return R.defaultView&&R.defaultView.getComputedStyle?i=R.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function l(e,t,i){if(e){var n=e.getElementsByTagName(t),r=0,o=n.length;if(i)for(;o>r;r++)i(n[r],r);return n}return[]}function d(e,t,i,n,r,o,s){var a=R.createEvent("Event"),l=(e||t[I]).options,d="on"+i.charAt(0).toUpperCase()+i.substr(1);a.initEvent(i,!0,!0),a.to=t,a.from=r||t,a.item=n||t,a.clone=E,a.oldIndex=o,a.newIndex=s,t.dispatchEvent(a),l[d]&&l[d].call(e,a)}function h(e,t,i,n,r,o){var s,a,l=e[I],d=l.options.onMove;return s=R.createEvent("Event"),s.initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=i,s.draggedRect=n,s.related=r||t,s.relatedRect=o||t.getBoundingClientRect(),e.dispatchEvent(s),d&&(a=d.call(l,s)),a}function u(e){e.draggable=!1}function c(){Y=!1}function p(e,t){var i=e.lastElementChild,n=i.getBoundingClientRect();return(t.clientY-(n.top+n.height)>5||t.clientX-(n.right+n.width)>5)&&i}function m(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function g(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function f(e,t){var i,n;return function(){void 0===i&&(i=arguments,n=this,setTimeout(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),i=void 0},t))}}function v(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var b,y,w,E,A,S,C,x,L,F,T,M,k,D,z,H,_,N={},q=/\s+/g,I="Sortable"+(new Date).getTime(),B=window,R=B.document,U=B.parseInt,O=!!("draggable"in R.createElement("div")),P=function(e){return e=R.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),Y=!1,W=Math.abs,Q=([].slice,[]),V=f(function(e,t,i){if(i&&t.scroll){var n,r,o,s,a=t.scrollSensitivity,l=t.scrollSpeed,d=e.clientX,h=e.clientY,u=window.innerWidth,c=window.innerHeight;if(x!==i&&(C=t.scroll,x=i,C===!0)){C=i;do if(C.offsetWidth<C.scrollWidth||C.offsetHeight<C.scrollHeight)break;while(C=C.parentNode)}C&&(n=C,r=C.getBoundingClientRect(),o=(W(r.right-d)<=a)-(W(r.left-d)<=a),s=(W(r.bottom-h)<=a)-(W(r.top-h)<=a)),o||s||(o=(a>=u-d)-(a>=d),s=(a>=c-h)-(a>=h),(o||s)&&(n=B)),(N.vx!==o||N.vy!==s||N.el!==n)&&(N.el=n,N.vx=o,N.vy=s,clearInterval(N.pid),n&&(N.pid=setInterval(function(){n===B?B.scrollTo(B.pageXOffset+o*l,B.pageYOffset+s*l):(s&&(n.scrollTop+=s*l),o&&(n.scrollLeft+=o*l))},24)))}},30),X=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,n=this.el,r=this.options,o=e.type,s=e.touches&&e.touches[0],a=(s||e).target,l=a,h=r.filter;if(!("mousedown"===o&&0!==e.button||r.disabled)&&(a=i(a,r.draggable,n))){if(M=g(a),"function"==typeof h){if(h.call(this,e,a,this))return d(t,l,"filter",a,n,M),void e.preventDefault()}else if(h&&(h=h.split(",").some(function(e){return e=i(l,e.trim(),n),e?(d(t,e,"filter",a,n,M),!0):void 0})))return void e.preventDefault();(!r.handle||i(l,r.handle,n))&&this._prepareDragStart(e,s,a)}},_prepareDragStart:function(e,t,i){var n,o=this,a=o.el,d=o.options,h=a.ownerDocument;i&&!b&&i.parentNode===a&&(z=e,A=a,b=i,y=b.parentNode,S=b.nextSibling,D=d.group,n=function(){o._disableDelayedDrag(),b.draggable=!0,s(b,o.options.chosenClass,!0),o._triggerDragStart(t)},d.ignore.split(",").forEach(function(e){l(b,e.trim(),u)}),r(h,"mouseup",o._onDrop),r(h,"touchend",o._onDrop),r(h,"touchcancel",o._onDrop),d.delay?(r(h,"mouseup",o._disableDelayedDrag),r(h,"touchend",o._disableDelayedDrag),r(h,"touchcancel",o._disableDelayedDrag),r(h,"mousemove",o._disableDelayedDrag),r(h,"touchmove",o._disableDelayedDrag),o._dragStartTimer=setTimeout(n,d.delay)):n())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._disableDelayedDrag),o(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(z={target:b,clientX:e.clientX,clientY:e.clientY},this._onDragStart(z,"touch")):this.nativeDraggable?(r(b,"dragend",this),r(A,"dragstart",this._onDragStart)):this._onDragStart(z,!0);try{R.selection?R.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){A&&b&&(s(b,this.options.ghostClass,!0),e.active=this,d(this,A,"start",b,A,M))},_emulateDragOver:function(){if(H){if(this._lastX===H.clientX&&this._lastY===H.clientY)return;this._lastX=H.clientX,this._lastY=H.clientY,P||a(w,"display","none");var e=R.elementFromPoint(H.clientX,H.clientY),t=e,i=" "+this.options.group.name,n=Q.length;if(t)do{if(t[I]&&t[I].options.groups.indexOf(i)>-1){for(;n--;)Q[n]({clientX:H.clientX,clientY:H.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);P||a(w,"display","")}},_onTouchMove:function(t){if(z){e.active||this._dragStarted(),this._appendGhost();var i=t.touches?t.touches[0]:t,n=i.clientX-z.clientX,r=i.clientY-z.clientY,o=t.touches?"translate3d("+n+"px,"+r+"px,0)":"translate("+n+"px,"+r+"px)";_=!0,H=i,a(w,"webkitTransform",o),a(w,"mozTransform",o),a(w,"msTransform",o),a(w,"transform",o),t.preventDefault()}},_appendGhost:function(){if(!w){var e,t=b.getBoundingClientRect(),i=a(b),n=this.options;w=b.cloneNode(!0),s(w,n.ghostClass,!1),s(w,n.fallbackClass,!0),a(w,"top",t.top-U(i.marginTop,10)),a(w,"left",t.left-U(i.marginLeft,10)),a(w,"width",t.width),a(w,"height",t.height),a(w,"opacity","0.8"),a(w,"position","fixed"),a(w,"zIndex","100000"),a(w,"pointerEvents","none"),n.fallbackOnBody&&R.body.appendChild(w)||A.appendChild(w),e=w.getBoundingClientRect(),a(w,"width",2*t.width-e.width),a(w,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var i=e.dataTransfer,n=this.options;this._offUpEvents(),"clone"==D.pull&&(E=b.cloneNode(!0),a(E,"display","none"),A.insertBefore(E,b)),t?("touch"===t?(r(R,"touchmove",this._onTouchMove),r(R,"touchend",this._onDrop),r(R,"touchcancel",this._onDrop)):(r(R,"mousemove",this._onTouchMove),r(R,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(i&&(i.effectAllowed="move",n.setData&&n.setData.call(this,i,b)),r(R,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var n,r,o,s=this.el,l=this.options,d=l.group,u=d.put,m=D===d,g=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),_=!0,D&&!l.disabled&&(m?g||(o=!A.contains(b)):D.pull&&u&&(D.name===d.name||u.indexOf&&~u.indexOf(D.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(V(e,l,this.el),Y)return;if(n=i(e.target,l.draggable,s),r=b.getBoundingClientRect(),o)return t(!0),void(E||S?A.insertBefore(b,E||S):g||A.appendChild(b));if(0===s.children.length||s.children[0]===w||s===e.target&&(n=p(s,e))){if(n){if(n.animated)return;v=n.getBoundingClientRect()}t(m),h(A,s,b,r,n,v)!==!1&&(b.contains(s)||(s.appendChild(b),y=s),this._animate(r,b),n&&this._animate(v,n))}else if(n&&!n.animated&&n!==b&&void 0!==n.parentNode[I]){L!==n&&(L=n,F=a(n),T=a(n.parentNode));var f,v=n.getBoundingClientRect(),C=v.right-v.left,x=v.bottom-v.top,M=/left|right|inline/.test(F.cssFloat+F.display)||"flex"==T.display&&0===T["flex-direction"].indexOf("row"),k=n.offsetWidth>b.offsetWidth,z=n.offsetHeight>b.offsetHeight,H=(M?(e.clientX-v.left)/C:(e.clientY-v.top)/x)>.5,N=n.nextElementSibling,q=h(A,s,b,r,n,v);if(q!==!1){if(Y=!0,setTimeout(c,30),t(m),1===q||-1===q)f=1===q;else if(M){var B=b.offsetTop,R=n.offsetTop;f=B===R?n.previousElementSibling===b&&!k||H&&k:R>B}else f=N!==b&&!z||H&&z;b.contains(s)||(f&&!N?s.appendChild(b):n.parentNode.insertBefore(b,f?N:n)),y=b.parentNode,this._animate(r,b),this._animate(v,n)}}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();a(t,"transition","none"),a(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,a(t,"transition","all "+i+"ms"),a(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){a(t,"transition",""),a(t,"transform",""),t.animated=!1},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;o(R,"touchmove",this._onTouchMove),o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"touchcancel",this._onDrop)},_onDrop:function(t){var i=this.el,n=this.options;clearInterval(this._loopId),clearInterval(N.pid),clearTimeout(this._dragStartTimer),o(R,"mousemove",this._onTouchMove),this.nativeDraggable&&(o(R,"drop",this),o(i,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(_&&(t.preventDefault(),!n.dropBubble&&t.stopPropagation()),w&&w.parentNode.removeChild(w),b&&(this.nativeDraggable&&o(b,"dragend",this),u(b),s(b,this.options.ghostClass,!1),s(b,this.options.chosenClass,!1),A!==y?(k=g(b),k>=0&&(d(null,y,"sort",b,A,M,k),d(this,A,"sort",b,A,M,k),d(null,y,"add",b,A,M,k),d(this,A,"remove",b,A,M,k))):(E&&E.parentNode.removeChild(E),b.nextSibling!==S&&(k=g(b),k>=0&&(d(this,A,"update",b,A,M,k),d(this,A,"sort",b,A,M,k)))),e.active&&((null===k||-1===k)&&(k=M),d(this,A,"end",b,A,M,k),this.save())),A=b=y=w=S=E=C=x=z=H=_=k=L=F=D=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?b&&(this._onDragOver(e),n(e)):("drop"===t||"dragend"===t)&&this._onDrop(e)},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,s=this.options;o>r;r++)e=n[r],i(e,s.draggable,this.el)&&t.push(e.getAttribute(s.dataIdAttr)||m(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var o=n.children[r];i(o,this.options.draggable,n)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return i(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;return void 0===t?i[e]:(i[e]=t,void("group"===e&&X(i)))},destroy:function(){var e=this.el;e[I]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),Q.splice(Q.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:r,off:o,css:a,find:l,is:function(e,t){return!!i(e,t,e)},extend:v,throttle:f,closest:i,toggleClass:s,index:g},e.create=function(t,i){return new e(t,i)},e.version="1.4.2",e});var hashedit=function(){"use strict";return{version:"0.3.3",debug:!0,demo:!1,current:{node:null,container:null,element:null,image:null},selection:null,elementMenu:'<span class="hashedit-move"><span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path></g></svg></span></span><span class="hashedit-properties"><span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g></svg></span></span><span class="hashedit-remove"><span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g></svg></span></span>',framework:"bootstrap",frameworkDefaults:{bootstrap:{table:"table",image:"img-responsive",code:""}},menu:[{action:"hashedit.h1",selector:"h1",title:"H1 Headline",display:"H1",html:"<h1>Start Typing...</h1>"},{action:"hashedit.h2",selector:"h2",title:"H2 Headline",display:"H2",html:"<h2>Start Typing...</h2>"},{action:"hashedit.h3",selector:"h3",title:"H3 Headline",display:"H3",html:"<h3>Start Typing...</h3>"},{action:"hashedit.h4",selector:"h4",title:"H4 Headline",display:"H4",html:"<h4>Start Typing...</h4>"},{action:"hashedit.h5",selector:"h5",title:"H5 Headline",display:"H5",html:"<h5>Start Typing...</h5>"},{action:"hashedit.p",selector:"p",title:"Paragraph",display:"P",html:"<p>Start Typing...</p>"},{action:"hashedit.blockquote",selector:"blockquote",title:"Blockquote",display:"<svg viewBox='0 0 24 24' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' style='pointer-events: none; display: block;'><g><path d='M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z'></path></g></svg>",html:"<blockquote></blockquote>"},{action:"hashedit.ul",selector:"ul",title:"Unordered List",display:"<svg viewBox='0 0 24 24' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' style='pointer-events: none; display: block;'><g><path d='M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12.17c-.74 0-1.33.6-1.33 1.33s.6 1.33 1.33 1.33 1.33-.6 1.33-1.33-.59-1.33-1.33-1.33zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z'></path></g></svg>",html:"<ul><li></li></ul>"},{action:"hashedit.ol",selector:"ol",title:"Ordered List",display:"<svg viewBox='0 0 24 24' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' style='pointer-events: none; display: block;'><g><path d='M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z'></path></g></svg>",html:"<ol><li></li></ol>"},{action:"hashedit.image",selector:"img",title:"Image",display:"<svg viewBox='0 0 24 24' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' style='pointer-events: none; display: block;'><path d='M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z'></path></g></svg>",html:'<img src="images/bridge.png" class="{{framework.image}}">',configure:function(){hashedit.showImageDialog()}},{action:"hashedit.table",selector:"table",title:"Table",display:"<svg viewBox='0 0 24 24' height='100%' width='100%' preserveAspectRatio='xMidYMid meet' style='pointer-events: none; display: block;'><g><path d='M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z'></path></g></svg>",html:'<table class="{{framework.table}}" rows="1" columns="2"><thead><tr><th>Header</th><th>Header</th></tr></thead><tbody><tr><td>Content</td><td>Content</td></tr></tbody></table>',configure:function(){document.querySelector("#hashedit-table-settings").setAttribute("visible","")},change:function(e,t,i){var n,r,o,s,a,l,d,h,u,c,p,m,g,f;if(t!=i)if("columns"==e){if(a=t,l=i,a>l)for(d=a-l,u=hashedit.current.node,c=hashedit.current.node.getElementsByTagName("tr"),n=0;n<c.length;n+=1)for(r=0;d>r;r+=1)"THEAD"==c[n].parentNode.nodeName?(p=document.createElement("th"),p.setAttribute("contentEditable","true"),p.innerHTML="New Header",c[n].appendChild(p)):(g=document.createElement("td"),g.setAttribute("contentEditable","true"),g.innerHTML="Content",c[n].appendChild(g));else if(l>a)for(h=l-a,u=hashedit.current.node,c=hashedit.current.node.getElementsByTagName("tr"),n=0;n<c.length;n+=1)for(r=0;h>r;r+=1)"THEAD"==c[n].parentNode.nodeName?c[n].querySelector("th:last-child").remove():c[n].querySelector("td:last-child").remove()}else if("rows"==e)if(o=t,s=i,u=hashedit.current.node,a=u.querySelectorAll("thead tr:first-child th").length,console.log("rows, new="+o+", old="+s+", columns="+a),o>s)for(d=o-s,console.log("rows, tobeadded="+d),r=0;d>r;r+=1){for(m=document.createElement("tr"),n=0;a>n;n+=1)g=document.createElement("td"),g.setAttribute("contentEditable","true"),g.innerHTML="Content",m.appendChild(g);console.log(f),f=u.getElementsByTagName("tbody")[0],f.appendChild(m)}else if(s>o)for(h=s-o,r=0;h>r;r+=1)m=u.querySelector("tbody tr:last-child"),null!==m&&m.remove()}},{action:"hashedit.code",selector:"pre",title:"Code",display:"<svg viewBox='0 0 24 24'  height='100%' width='100%' preserveAspectRatio='xMidYMid meet' style='pointer-events: none; display: block;'><g><path d='M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z'></path></g></svg>",html:"<pre>Start adding code</pre>"}],mirror:null,newElementCount:0,authUrl:"/api/auth",saveUrl:"/api/pages/save",addPageURL:"/api/pages/add",pageSettingsURL:"/api/pages/settings",retrieveUrl:"/api/pages/retrieve",uploadUrl:"/api/images/add",imagesListUrl:"/api/images/list",pagesListUrl:"/api/pages/list",pathListUrl:"/api/pages/path/list",imagesListLoaded:!1,pagesListLoaded:!1,pathListLoaded:!1,init:function(){var e,t,i,n,r,o,s;t="",i=null,n=window.location.pathname,null!==localStorage.getItem(n)?(t=localStorage.getItem(n),i=new DOMParser,hashedit.mirror=i.parseFromString(t,"text/html")):fetch(hashedit.retrieveUrl,{credentials:"include"}).then(function(e){return e.text()}).then(function(t){for(i=new DOMParser,r=i.parseFromString(t,"text/html"),o=r.getElementsByTagName("script"),s=o[0],s.parentNode.removeChild(s),o=r.getElementsByTagName("*"),e=0;e<o.length;e+=1)o[e].setAttribute("data-ref",e);localStorage.clear(),localStorage.setItem(n,r.documentElement.innerHTML),window.location.href=window.location.href,location.reload()})},setActive:function(){var e,t;for(document.querySelector("body").setAttribute("hashedit-active",""),t=document.querySelectorAll("[hashedit] p, [hashedit] h1, [hashedit] h2, [hashedit] h3, [hashedit] h4, [hashedit] h5,[hashedit] li, [hashedit] td, [hashedit] th, [hashedit] blockquote, [hashedit] pre"),e=0;e<t.length;e+=1)t[e].setAttribute("contentEditable","true")},setupSortable:function(e){var t,i,n,r,o,s,a,l,d,h,u;for(t=0;t<e.length;t+=1)for(n=document.querySelectorAll("[hashedit] "+e[t]),i=0;i<n.length;i+=1)n[i].setAttribute("hashedit-sortable","");for(n=document.querySelectorAll("[hashedit-sortable] > *"),i=0;i<n.length;i+=1)r=document.createElement("div"),r.setAttribute("class","hashedit-element"),hashedit.wrap(r,n[i]),o=document.createElement("span"),o.setAttribute("class","hashedit-move"),o.innerHTML='<span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" fit="" style="pointer-events: none; display: block;"><g><path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path></g></svg></span>',r.appendChild(o),o=document.createElement("span"),o.setAttribute("class","hashedit-properties"),o.innerHTML='<span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g></svg></span>',r.appendChild(o),o=document.createElement("span"),o.setAttribute("class","hashedit-remove"),o.innerHTML='<span><svg viewBox="0 0 24 24" height="100%" width="100%" preserveAspectRatio="xMidYMid meet"><g><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path></g></svg></span>',r.appendChild(o);for(n=document.querySelectorAll("[hashedit] [hashedit-sortable]"),t=0;t<n.length;t+=1)s=n[t],u=new Sortable(s,{group:"hashedit-sortable",sort:!0,delay:0,disabled:!1,store:null,animation:150,handle:".hashedit-move",ghostClass:"hashedit-highlight",scroll:!0,scrollSensitivity:30,scrollSpeed:10,onEnd:function(e){a=e.item,l=a.querySelector(":first-child").getAttribute("data-ref"),void 0!==l&&(a.nextSibling.querySelector?(d=a.nextSibling.querySelector(":first-child").getAttribute("data-ref"),hashedit.moveMirrorElement(l,d,"before")):a.parentNode&&(h=a.parentNode.getAttribute("data-ref"),hashedit.moveMirrorElement(l,h,"append")))}})},showAuth:function(){var e=document.createElement("nav");e.setAttribute("class","hashedit-login"),e.innerHTML='You need to signin to begin editing. <a href="/auth/google">Sign In with Google</a>',document.body.appendChild(e)},setupDrawer:function(){var e,t,i,n,r,o;e=document.createElement("nav"),e.setAttribute("class","hashedit-drawer"),e.innerHTML='<ul><li hashedit-add-page><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><g><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"></path></g></svg><a>Add Page</a></li><li hashedit-page-settings><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><g><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g></svg><a>Page Settings</a></li></ul>',document.body.appendChild(e),document.querySelector("[hashedit-add-page]").addEventListener("click",function(){e=document.querySelector(".hashedit-drawer"),e.removeAttribute("visible"),document.getElementById("hashedit-add-page-url").value="",document.getElementById("hashedit-add-page").setAttribute("visible",""),hashedit.pathListLoaded===!1&&fetch(hashedit.pathListUrl,{credentials:"include"}).then(function(e){return e.json()}).then(function(e){for(r=document.getElementById("hashedit-add-page-path"),n=0;n<e.length;n+=1)o=document.createElement("option"),o.setAttribute("value",e[n]),o.innerHTML=e[n],r.appendChild(o);hashedit.pathListLoaded=!0})["catch"](function(e){console.log("parsing failed",e)})}),document.querySelector("[hashedit-page-settings]").addEventListener("click",function(){e=document.querySelector(".hashedit-drawer"),e.removeAttribute("visible"),t="",i=document.querySelector('meta[name="description"]'),null!==i&&(t=i.getAttribute("content")),document.getElementById("hashedit-page-title").value=document.title,document.getElementById("hashedit-page-desc").value=t,document.querySelector("#hashedit-page-settings").setAttribute("visible","")})},setupToast:function(){var e;e=document.createElement("div"),e.setAttribute("class","hashedit-toast"),e.innerHTML="Sample Toast",document.body.appendChild(e)},showToast:function(e,t){var i;i=document.querySelector(".hashedit-toast"),i.innerHTML=e,i.removeAttribute("success"),i.removeAttribute("failure"),i.setAttribute("active",""),"success"==t?i.setAttribute("success",""):"failure"==t&&i.setAttribute("failure",""),setTimeout(function(){i.removeAttribute("active")},2e3)},setupMenu:function(){var e,t,i,n,r;e=document.createElement("menu"),e.setAttribute("class","hashedit-menu"),e.innerHTML='<button class="hashedit-more"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><g><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g></svg></button><button class="hashedit-save"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet"><g><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" class="style-scope iron-icon"></path></g></svg></button><div class="hashedit-menu-body"></div>',document.body.appendChild(e),document.querySelector(".hashedit-more").addEventListener("click",function(){t=document.querySelector(".hashedit-drawer"),t.hasAttribute("visible")?t.removeAttribute("visible"):t.setAttribute("visible","")}),document.querySelector(".hashedit-save").addEventListener("click",function(){hashedit.demo===!0?(hashedit.showToast("Cannot save in demo mode","failure"),localStorage.clear()):(i=hashedit.retrieveUpdateArray(),hashedit.saveUrl&&(n=new XMLHttpRequest,n.open("post",hashedit.saveUrl,!0),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(JSON.stringify(i)),n.onloadend=function(){localStorage.clear(),r=hashedit.replaceAll(window.location.href,"#edit",""),window.location.href=r}))})},setupDraggable:function(){var e,t,i,n,r,o;t=document.querySelector(".hashedit-menu-body"),i=new Sortable(t,{group:{name:"hashedit-sortable",pull:"clone",put:!1},draggable:"a",sort:!1,delay:0,disabled:!1,animation:150,ghostClass:"hashedit-highlight",scroll:!0,scrollSensitivity:30,scrollSpeed:10,onEnd:function(t){for(n=t.item,r=n.getAttribute("data-action"),e=0;e<hashedit.menu.length;e+=1)hashedit.menu[e].action==r&&(o=hashedit.menu[e].html,o=hashedit.replaceAll(o,"{{framework.image}}",hashedit.frameworkDefaults[hashedit.framework].image),o=hashedit.replaceAll(o,"{{framework.table}}",hashedit.frameworkDefaults[hashedit.framework].table),o=hashedit.replaceAll(o,"{{framework.code}}",hashedit.frameworkDefaults[hashedit.framework].code),hashedit.append(o));return!1}})},loadHTML:function(e){var t,i;fetch(e+"html/modals.html").then(function(e){return e.text()}).then(function(e){for(i=document.createElement("div"),i.innerHTML=e,t=0;t<i.childNodes.length;t+=1)document.querySelector("body").appendChild(i.childNodes[t]);for(t=0;t<hashedit.menu.length;t+=1)hashedit.menu[t].init&&hashedit.menu[t].init();hashedit.setupConfigEvents(),hashedit.setupTextEvents(),hashedit.setupModalEvents()})},createMenu:function(){var e,t,i;for(e=0;e<hashedit.menu.length;e+=1)t=hashedit.menu[e],i=document.createElement("a"),i.setAttribute("title",t.title),i.setAttribute("data-action",t.action),i.innerHTML=t.display,document.querySelector(".hashedit-menu-body").appendChild(i);hashedit.setupDraggable()},showTextOptions:function(e){var t,i,n,r,o;for(hashedit.current.element=e,hashedit.current.container=hashedit.findParentBySelector(e,".hashedit-element"),hashedit.current.node=hashedit.current.container.firstChild,i=document.querySelector(".hashedit-drawer"),i.removeAttribute("visible"),n=document.querySelector("#hashedit-image-settings"),n.removeAttribute("visible"),n=document.querySelector("#hashedit-link-settings"),n.removeAttribute("visible"),r=document.querySelector("#hashedit-text-settings"),r.setAttribute("visible",""),o=document.querySelectorAll("[data-model]"),t=0;t<o.length;t+=1)"SELECT"==o[t].nodeType?o[t].selectedIndex=0:o[t].value="";hashedit.bind()},bind:function(){var e,t,i,n,r,o;for(e=hashedit.current.node.attributes,t=0;t<e.length;t+=1)for(n=e[t].nodeName.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}),r=e[t].nodeValue,!isNaN(parseFloat(r))&&isFinite(r)&&(r=parseFloat(r)),o=document.querySelectorAll('[data-model="node.'+n+'"]'),i=0;i<o.length;i+=1)o[i].value=r},setupContentEditableEvents:function(){var e,t,i,n,r,o,s,a,l,d,h,u,c,p,m,g,f;for(i=document.querySelectorAll("body"),e=0;e<i.length;e+=1)["click","focus"].forEach(function(a){i[e].addEventListener(a,function(i){for(u=hashedit.findParentBySelector(i.target,".hashedit-element"),f=null,null!==u&&(f=u.firstChild),c=document.querySelectorAll("[current-hashedit-element]"),t=0;t<c.length;t+=1)c[t].removeAttribute("current-hashedit-element");if(u&&u.setAttribute("current-hashedit-element","true"),p=!1,null!==hashedit.findParentBySelector(i.target,".hashedit-properties")&&(p=!0),g=!1,null!==hashedit.findParentBySelector(i.target,".hashedit-remove")&&(g=!0),g===!0){u.remove();var a=f.getAttribute("data-ref");null!==a&&hashedit.removeMirrorElement(a)}else if(p===!0){for(hashedit.current.node=f,
hashedit.bind(),m=!0,e=0;e<hashedit.menu.length;e+=1)u.firstChild.matches(hashedit.menu[e].selector)&&hashedit.menu[e].configure&&(m=!1,hashedit.menu[e].configure());m===!0&&document.getElementById("hashedit-element-settings").setAttribute("visible","true")}else if("A"==i.target.nodeName){for(n=document.querySelectorAll("[hashedit]"),r=!1,e=0;e<n.length;e+=1)n[e].contains(i.target)===!0&&(r=!0);r&&hashedit.showLinkDialog()}else if("IMG"==i.target.nodeName){for(hashedit.current.node=i.target,n=document.querySelectorAll("[hashedit]"),r=!1,e=0;e<n.length;e+=1)n[e].contains(i.target)===!0&&(r=!0);r&&hashedit.showImageDialog()}else if(i.target.hasAttribute("contentEditable"))hashedit.showTextOptions(i.target);else if(i.target.parentNode.hasAttribute("contentEditable")&&i.target.parentNode)hashedit.showTextOptions(i.target);else if("dz-hidden-input"==i.target.className);else{for(o=document.querySelectorAll(".hashedit-config, .hashedit-modal, .hashedit-menu, .hashedit-drawer"),s=!1,e=0;e<o.length;e+=1)o[e].contains(i.target)===!0&&(s=!0);if(s===!1)for(e=0;e<o.length;e+=1)o[e].removeAttribute("visible")}})}),["input"].forEach(function(t){i[e].addEventListener(t,function(e){if(e.target.hasAttribute("contentEditable"))for(a=e.target;null!==a;)a.hasAttribute("data-ref")?(l=a.getAttribute("data-ref"),d=a.innerHTML,hashedit.setMirrorHTML(l,d),a=null):a=a.parentNode})}),["keydown"].forEach(function(t){i[e].addEventListener(t,function(e){e.target.hasAttribute("contentEditable")&&(a=e.target,13===e.keyCode&&"LI"==a.nodeName&&(h=document.createElement("li"),h.setAttribute("contentEditable",!0),a.parentNode.appendChild(h),a.parentNode.lastChild.focus(),e.preventDefault(),e.stopPropagation()),8===e.keyCode&&"LI"==a.nodeName&&""===a.innerHTML&&(console.log(a.previousSibling),null!==a.previousSibling&&(u=a.parentNode,a.remove(),u.lastChild.focus()),e.preventDefault(),e.stopPropagation()))})})},selectElementContents:function(e){var t,i;t=document.createRange(),t.selectNodeContents(e),i=window.getSelection(),i.removeAllRanges(),i.addRange(t)},append:function(e){var t,i,n,r,o,s,a;if(i=document.createElement("div"),i.setAttribute("class","hashedit-element"),i.innerHTML=e+hashedit.elementMenu,n=document.querySelector("[hashedit-sortable] [data-action]"),null!==n){n.parentNode.replaceChild(i,n);var l=i.querySelectorAll("p, h1, h2, h3, h4, h5, li, td, th, blockquote, pre");for(t=0;t<l.length;t+=1)l[t].setAttribute("contentEditable","true");l.length>0&&(l[0].focus(),hashedit.showTextOptions(l[0]),hashedit.selectElementContents(l[0])),hashedit.newElementCount=hashedit.newElementCount+1,r=i.querySelector(":first-child"),null!==r&&(o="new-"+hashedit.newElementCount,r.setAttribute("data-ref",o)),i.nextSibling?(s=i.nextSibling.querySelector(":first-child").getAttribute("data-ref"),hashedit.insertMirrorElement(o,s,"before",e)):i.parentNode&&(a=i.parentNode.getAttribute("data-ref"),hashedit.insertMirrorElement(o,a,"append",e))}return i},setupModalEvents:function(){var e,t,i,n,r,o,s,a,l,d,h,u,c,p;for(t=new Dropzone("#hashedit-dropzone",{url:hashedit.uploadUrl}),t.on("complete",function(e){t.removeFile(e)}),t.on("success",function(e,t){var i="images/"+e.name;p=document.getElementById("hashedit-image-src"),p.value=i,r=document.getElementById("images-list"),o=document.createElement("div"),o.setAttribute("class","hashedit-list-item"),o.innerHTML="images/"+i,o.setAttribute("data-value","images/"+i),r.appendChild(o),p.dispatchEvent(new Event("input",{bubbles:!0})),n=document.getElementById("hashedit-image-settings"),n.removeAttribute("hashedit-card-flipped")}),r=document.getElementById("images-list"),["click"].forEach(function(e){r.addEventListener(e,function(e){e.target.hasAttribute("data-value")===!0&&(c=e.target.getAttribute("data-value"),p=document.getElementById("hashedit-image-src"),p.value=c,p.dispatchEvent(new Event("input",{bubbles:!0})),n=document.getElementById("hashedit-image-settings"),n.removeAttribute("hashedit-card-flipped"))})}),r=document.getElementById("pages-list"),["click"].forEach(function(e){r.addEventListener(e,function(e){e.target.hasAttribute("data-value")===!0&&(c=e.target.getAttribute("data-value"),p=document.getElementById("hashedit-link-href"),p.value=c,p.dispatchEvent(new Event("input",{bubbles:!0})),n=document.getElementById("hashedit-link-settings"),n.removeAttribute("hashedit-card-flipped"))})}),i=document.querySelectorAll(".toggle-select-image"),e=0;e<i.length;e+=1)["click"].forEach(function(t){i[e].addEventListener(t,function(t){n=document.querySelector("#hashedit-image-settings"),n.hasAttribute("hashedit-card-flipped")?n.removeAttribute("hashedit-card-flipped"):n.setAttribute("hashedit-card-flipped","true"),hashedit.imagesListLoaded===!1&&fetch(hashedit.imagesListUrl,{credentials:"include"}).then(function(e){return e.json()}).then(function(t){for(r=document.getElementById("images-list"),r.innerHTML="",e=0;e<t.length;e+=1)o=document.createElement("div"),o.setAttribute("class","hashedit-list-item"),o.innerHTML=t[e],o.setAttribute("data-value",t[e]),r.appendChild(o);hashedit.imagesListLoaded=!0})["catch"](function(e){console.log("parsing failed",e)})})});for(i=document.querySelectorAll(".toggle-select-url"),e=0;e<i.length;e+=1)["click"].forEach(function(t){i[e].addEventListener(t,function(t){n=document.querySelector("#hashedit-link-settings"),n.hasAttribute("hashedit-card-flipped")?n.removeAttribute("hashedit-card-flipped"):n.setAttribute("hashedit-card-flipped","true"),hashedit.pagesListLoaded===!1&&fetch(hashedit.pagesListUrl,{credentials:"include"}).then(function(e){return e.json()}).then(function(t){for(r=document.getElementById("pages-list"),r.innerHTML="",e=0;e<t.length;e+=1)o=document.createElement("div"),o.setAttribute("class","hashedit-list-item"),o.innerHTML=t[e],o.setAttribute("data-value",t[e]),r.appendChild(o);hashedit.pagesListLoaded=!0})["catch"](function(e){console.log("parsing failed",e)})})});document.querySelector("[hashedit-add-page-create]").addEventListener("click",function(){hashedit.demo===!0?hashedit.showToast("Cannot add page in demo mode","failure"):(s=document.getElementById("hashedit-add-page-path").value,a=document.getElementById("hashedit-add-page-url").value,l=document.getElementById("hashedit-add-page-title").value,d=document.getElementById("hashedit-add-page-desc").value,a=a.trim(),""!==a?(a=hashedit.replaceAll(a,".html",""),a=hashedit.replaceAll(a,".htm",""),a=hashedit.replaceAll(a,".","-"),a=hashedit.replaceAll(a," ","-"),a=hashedit.replaceAll(a,"/","-"),a=s+"/"+a+".html",a=hashedit.replaceAll(a,"//","/"),h={url:a,title:l,description:d},hashedit.addPageURL&&(u=new XMLHttpRequest,u.open("post",hashedit.addPageURL,!0),u.setRequestHeader("Content-Type","application/json; charset=UTF-8"),u.send(JSON.stringify(h)),u.onloadend=function(){document.getElementById("hashedit-add-page").removeAttribute("visible"),hashedit.showToast("Page added at "+a,"success")})):hashedit.showToast("URL required","failure"))}),document.querySelector("[hashedit-apply-page-settings]").addEventListener("click",function(){hashedit.demo===!0?hashedit.showToast("Cannot save settings in demo mode","failure"):(l=document.getElementById("hashedit-page-title").value,d=document.getElementById("hashedit-page-desc").value,h={title:l,description:d},hashedit.pageSettingsURL&&(u=new XMLHttpRequest,u.open("post",hashedit.pageSettingsURL,!0),u.setRequestHeader("Content-Type","application/json; charset=UTF-8"),u.send(JSON.stringify(h)),u.onloadend=function(){document.getElementById("hashedit-page-settings").removeAttribute("visible"),hashedit.showToast("Settings updated successfully!","success")}))})},setupConfigEvents:function(){var e,t,i,n,r,o,s,a,l,d;for(t=document.querySelectorAll(".hashedit-config, .hashedit-modal"),e=0;e<t.length;e+=1)["propertychange","change","click","keyup","input","paste"].forEach(function(h){t[e].addEventListener(h,function(t){if(i=t.target,i.hasAttribute("hashedit-cancel-modal"))for(n=document.querySelectorAll(".hashedit-modal"),e=0;e<n.length;e+=1)n[e].removeAttribute("visible");if(i.hasAttribute("data-model")){if(null!==hashedit.current.node&&(r=hashedit.current.node.getAttribute("data-ref")),o=i.getAttribute("data-model"),s="",a="",s=i.value,-1!=o.indexOf("node.")&&(l=o.split("."),l.length>1)){a=l[1].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();var h=hashedit.current.node.getAttribute(a);for(hashedit.current.node.setAttribute(a,s),hashedit.setMirrorAttribute(r,a,s),d=hashedit.createTextStyle(hashedit.current.node),hashedit.current.node.setAttribute("style",d),e=0;e<hashedit.menu.length;e+=1)hashedit.current.node.matches(hashedit.menu[e].selector)&&hashedit.menu[e].configure&&hashedit.menu[e].change(a,s,h)}-1!=o.indexOf("link.")&&(l=o.split("."),l.length>1&&(a=l[1].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hashedit.currLink.setAttribute(a,s),hashedit.current.node.dispatchEvent(new Event("input",{bubbles:!0})))),-1!=o.indexOf("image.")&&(l=o.split("."),l.length>1&&(a=l[1].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=hashedit.current.node.getAttribute("data-ref"),hashedit.current.node.setAttribute(a,s),hashedit.setMirrorAttribute(r,a,s),null!==hashedit.current.node&&hashedit.current.node.dispatchEvent(new Event("input",{bubbles:!0}))))}},!1)})},setupTextEvents:function(){var e,t,i,n,r,o,s,a;for(t=document.querySelectorAll(".hashedit-config"),e=0;e<t.length;e+=1)["mousedown","touchstart"].forEach(function(l){t[e].addEventListener(l,function(e){if(i=e.target,"SVG"==i.nodeName&&(i=i.parentNode),i.hasAttribute("data-action")){if(n=i.getAttribute("data-action"),"hashedit.text.bold"==n)return document.execCommand("Bold",!1,null),!1;if("hashedit.text.italic"==n)return document.execCommand("Italic",!1,null),!1;if("hashedit.text.strike"==n)return document.execCommand("strikeThrough",!1,null),!1;if("hashedit.text.subscript"==n)return document.execCommand("subscript",!1,null),!1;if("hashedit.text.superscript"==n)return document.execCommand("superscript",!1,null),!1;if("hashedit.text.underline"==n)return document.execCommand("underline",!1,null),!1;if("hashedit.text.link"==n)return r=hashedit.getSelectedText(),o="<a>"+r+"</a>",document.execCommand("insertHTML",!1,o),hashedit.showLinkDialog(),!1;if("hashedit.text.code"==n)return r=hashedit.getSelectedText(),o="<code>"+r+"</code>",document.execCommand("insertHTML",!1,o),!1;if("hashedit.text.alignLeft"==n)return s=document.querySelector('.hashedit-modal [data-model="node.class"]'),a=s.value,a=hashedit.replaceAll(a,"text-center",""),a=hashedit.replaceAll(a,"text-left",""),a=hashedit.replaceAll(a,"text-right",""),a+=" text-left",s.value=a.trim(),s.dispatchEvent(new Event("change",{bubbles:!0})),!1;if("hashedit.text.alignRight"==n)return s=document.querySelector('.hashedit-modal [data-model="node.class"]'),a=s.value,a=hashedit.replaceAll(a,"text-center",""),a=hashedit.replaceAll(a,"text-left",""),a=hashedit.replaceAll(a,"text-right",""),a+=" text-right",s.value=a.trim(),s.dispatchEvent(new Event("change",{bubbles:!0})),!1;if("hashedit.text.alignCenter"==n)return s=document.querySelector('.hashedit-modal [data-model="node.class"]'),a=s.value,a=hashedit.replaceAll(a,"text-center",""),a=hashedit.replaceAll(a,"text-left",""),a=hashedit.replaceAll(a,"text-right",""),a+=" text-center",s.value=a.trim(),s.dispatchEvent(new Event("change",{bubbles:!0})),!1;if("hashedit.text.undo"==n)return document.execCommand("undo",!1,null),!1}},!1)})},showLinkDialog:function(){var e,t,i,n,r,o;hashedit.currLink=hashedit.getLinkFromSelection(),null!==hashedit.currLink&&(e=hashedit.currLink.getAttribute("id")||"",t=hashedit.currLink.getAttribute("class")||"",i=hashedit.currLink.getAttribute("href")||"",n=hashedit.currLink.getAttribute("target")||"",r=hashedit.currLink.getAttribute("title")||"",o=document.querySelector("#hashedit-link-settings"),o.setAttribute("visible",""),document.getElementById("hashedit-link-id").value=e,document.getElementById("hashedit-link-cssclass").value=t,document.getElementById("hashedit-link-href").value=i,document.getElementById("hashedit-link-target").value=n,document.getElementById("hashedit-link-title").value=r)},showImageDialog:function(){var e,t,i,n,r;null!==hashedit.current.node&&(e=hashedit.current.node.getAttribute("id")||"",t=hashedit.current.node.getAttribute("class")||"",i=hashedit.current.node.getAttribute("src")||"",n=hashedit.current.node.getAttribute("target")||"",r=document.querySelector("#hashedit-image-settings"),r.setAttribute("visible",""),document.getElementById("hashedit-image-id").value=e,document.getElementById("hashedit-image-cssclass").value=t,document.getElementById("hashedit-image-src").value=i,document.getElementById("hashedit-image-target").value=n)},executeFunctionByName:function(e,t){var i,n,r,o;for(n=[].slice.call(arguments).splice(2),r=e.split("."),o=r.pop(),i=0;i<r.length;i++)t=t[r[i]];return t[o].apply(this,n)},getSelectedText:function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},saveSelection:function(){var e,t,i,n;if(window.getSelection){if(i=window.getSelection(),i.getRangeAt&&i.rangeCount){for(e=[],n=i.rangeCount,t=0;n>t;t+=1)e.push(i.getRangeAt(t));return e}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},getLinkFromSelection:function(){var e,t,i,n,r;return e=null,document.selection?e=document.selection.createRange().parentElement():(t=window.getSelection(),t.rangeCount>0&&(e=t.getRangeAt(0).startContainer.parentNode)),null!==e&&"A"==e.tagName?e:window.getSelection&&(t=window.getSelection(),t.rangeCount>0)?(i=t.getRangeAt(0),n=document.createElement("DIV"),n.appendChild(i.cloneContents()),r=n.getElementsByTagName("A"),r.length>0?r[0]:null):null},restoreSelection:function(e){var t,i,n;if(e)if(window.getSelection)for(n=window.getSelection(),n.removeAllRanges(),i=e.length,t=0;i>t;t+=1)n.addRange(e[t]);else document.selection&&e.select&&e.select()},replaceAll:function(e,t,i){var n,r;for(n=e,r=n.indexOf(t);-1!=r;)n=n.replace(t,i),r=n.indexOf(t);return n},createTextStyle:function(e){var t,i,n,r,o,s,a;return t="",i=e.getAttribute("text-color")||"",n=e.getAttribute("text-size")||"",r=e.getAttribute("text-shadow-color")||"",o=e.getAttribute("text-shadow-horizontal")||"",s=e.getAttribute("text-shadow-horizontal")||"",a=e.getAttribute("text-shadow-blur")||"",""!==i&&(t+="color:"+i+";"),""!==n&&(t+="font-size:"+n+";"),""!==r&&(t+="text-shadow: "+o+" "+s+" "+a+" "+r+";"),t},getQueryStringByName:function(e){var t,i,n;return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(window.location.href),null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},retrieveHTML:function(){return hashedit.mirror.documentElement.outerHTML},retrieveUpdateArray:function(){var e,t,i,n,r,o;for(n=hashedit.mirror.documentElement.querySelectorAll("[hashedit]"),i=[],e=0;e<n.length;e+=1){for(o=n[e].querySelectorAll("[data-ref]"),t=0;t<o.length;t+=1)o[t].removeAttribute("data-ref");r={selector:n[e].getAttribute("hashedit-selector"),html:n[e].innerHTML},i.push(r)}return i},removeMirrorElement:function(e){var t;t=hashedit.mirror.querySelector('[data-ref="'+e+'"]'),t.remove()},setMirrorHTML:function(e,t){var i;i=hashedit.mirror.querySelector('[data-ref="'+e+'"]'),i.innerHTML=t},setMirrorAttribute:function(e,t,i){var n;n=hashedit.mirror.querySelector('[data-ref="'+e+'"]'),n.setAttribute(t,i)},moveMirrorElement:function(e,t,i){console.log("ref="+e+" toRef="+t+" method="+i);var n,r,o;hashedit.debug===!0&&console.log("[hashedit.moveMirrorElement] ref="+e+" toref="+t+" method="+i),n=hashedit.mirror.querySelector('[data-ref="'+e+'"]'),r=hashedit.mirror.querySelector('[data-ref="'+t+'"]'),null!==r&&(o=r.parentNode,"before"==i?o.insertBefore(n,r):"append"==i&&r.appendChild(n))},insertMirrorElement:function(e,t,i,n){var r,o,s,a;hashedit.debug===!0&&console.log("[hashedit.insertMirrorElement] ref="+e+" toref="+t+" method="+i),r=document.createElement("div"),r.innerHTML=n,o=r.firstChild,o.setAttribute("data-ref",e),s=hashedit.mirror.querySelector('[data-ref="'+t+'"]'),a=s.parentNode,"before"==i?a.insertBefore(o,s):"append"==i&&s.appendChild(o)},setup:function(e){console.log("Hashedit version: "+hashedit.version),e.demo===!0?(hashedit.demo=!0,hashedit.init(),hashedit.setActive(),hashedit.setupSortable(e.sortable),hashedit.setupContentEditableEvents(),hashedit.setupMenu(e.path),hashedit.setupToast(),hashedit.setupDrawer(),hashedit.createMenu(e.path),hashedit.loadHTML(e.path)):fetch(hashedit.authUrl,{credentials:"include"}).then(function(t){200!==t.status?hashedit.showAuth():(hashedit.init(),hashedit.setActive(),hashedit.setupSortable(e.sortable),hashedit.setupContentEditableEvents(),hashedit.setupMenu(e.path),hashedit.setupToast(),hashedit.setupDrawer(),hashedit.createMenu(e.path),hashedit.loadHTML(e.path))})},collectionHas:function(e,t){var i,n;for(n=e.length,i=0;n>i;i+=1)if(e[i]==t)return!0;return!1},findParentBySelector:function(e,t){var i,n;for(i=document.querySelectorAll(t),n=e.parentNode;n&&!hashedit.collectionHas(i,n);)n=n.parentNode;return n},wrap:function(e,t){var i,n,r,o,s;for(t.length||(t=[t]),i=t.length-1;i>=0;i--)n=i>0?e.cloneNode(!0):e,r=t[i],o=r.parentNode,s=r.nextSibling,n.appendChild(r),s?o.insertBefore(n,s):o.appendChild(n)}}}();